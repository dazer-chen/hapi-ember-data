<?xml version="1.0" encoding="UTF-8"?>
<!--Document created by: Yasir Hantoush, Mango MAS -->
<mappings>
	<!-- Lookup Tables -->
	<class name="Location" plural="locations">
		<field name="locationId" 		type="int" 		notNull="true" primaryKey="true" autoIncrement="true"></field>
		<field name="locationName" 		type="string" 	notNull="true" size="100"></field>
	</class>
	<class name="HealthCondition" plural="healthConditions">
		<field name="healthConditionId" 		type="int" 		notNull="true" primaryKey="true" autoIncrement="true"></field>
		<field name="healthConditionName" 	type="string" 	notNull="true" size="100"></field>
	</class>
	<class name="Drug" plural="drugs">
		<field name="drugId" 		type="int" 		notNull="true" primaryKey="true" autoIncrement="true"></field>
		<field name="drugName" 		type="string" 	notNull="true" size="200" searchable="true" filterable="true"></field>
		<field name="genericName" 	type="string" 	size="200" searchable="true" filterable="true"></field>
		<field name="pack" 			type="string" 	size="100" searchable="true" filterable="true"></field>
		<field name="manufacture" 	type="string" 	size="200" searchable="true" filterable="true"></field>
		<field name="origin" 		type="string" 	size="100" searchable="true" filterable="true"></field>
		<field name="agent" 		type="string" 	size="200" searchable="true" filterable="true"></field>
	</class>
	<class name="HgUser" plural="hgUsers">
		<field name="userId" 		type="int" notNull="true" primaryKey="true" autoIncrement="true"></field>
		<field name="username" 		type="string" notNull="true" size="64"></field>
		<field name="password" 		type="string" notNull="true" size="64"></field>
		<field name="email" 		type="string" notNull="true" size="100"></field>
	</class>

	<!-- Patient Table -->
	<class name="Item" plural="items">
		<field name="item_id"		type="int" 	  primaryKey="true" autoIncrement="true"></field>
		<field name="guid"			type="int" 	  primaryKey="true" autoIncrement="true"></field>
		<field name="itemName"		type="string" notNull="true" size="250" searchable="true" filterable="true"></field>
		<field name="description"	type="string" size="50" notNull="false" searchable="true" filterable="true"></field>
		<field name="pack"			type="string" size="250" searchable="true" filterable="true"></field>
		<field name="price" 		type="string" size="250" ></field>
		<field name="unit"			type="datetime" notNull="true" insert="false" update="false"></field>
		<field name="balance" 		type="int"/>
		<!-- Ones -->
		<one   name="category" 		type="int"    refTable="HgUser" refColumn="userId"></one>
		<one   name="brand" 		type="int"    refTable="HgUser" refColumn="userId"></one>
		<one   name="origin" 		type="int"    refTable="HgUser" refColumn="userId"></one>
		<one   name="agent" 		type="int"    refTable="HgUser" refColumn="userId"></one>
		<one   name="createdBy" 	type="int"    refTable="HgUser" refColumn="userId"></one>
		<!-- Many -->
		<many  name="barcodes" 		class="ItemBarcode" 		through="PatientAllergy" 			localField="patientId" throughLocalField="patientId" throughForiegnField="allergyId" 			foriegnField="allergyId" />
		<many  name="locations" 	class="ItemLocation" through="PatientHealthCondition" 	localField="patientId" throughLocalField="patientId" throughForiegnField="healthConditionId" 	foriegnField="healthConditionId" />
		<many  name="components" 	class="ItemTags" through="PatientHealthCondition" 	localField="patientId" throughLocalField="patientId" throughForiegnField="healthConditionId" 	foriegnField="healthConditionId" />
		<many  name="suppliers" 	class="ItemTags" through="PatientHealthCondition" 	localField="patientId" throughLocalField="patientId" throughForiegnField="healthConditionId" 	foriegnField="healthConditionId" />
	</class>

	<!-- item links -->
	<class name="ItemBarcode" plural="itemBarcodes">
		<field name="patientAllergyId" 	type="int" 	notNull="true" primaryKey="true" autoIncrement="true"></field>
		<one   name="patientId" 		type="int"    refTable="Patient" refColumn="patientId"></one>
		<one   name="allergyId" 		type="int"    refTable="Allergy" refColumn="allergyId"></one>
	</class>

	<class name="PatientHealthCondition" plural="patientConditions">
		<field name="patientHealthConditionId" 	type="int" notNull="true" primaryKey="true" autoIncrement="true"></field>
		<one   name="patientId" 				type="int"    refTable="Patient" refColumn="patientId"></one>
		<one   name="healthConditionId" 		type="int"    refTable="HealthCondition" refColumn="healthConditionId"></one>
	</class>

	<class name="PatientDrug" plural="patientDrugs">
		<field name="patientDrugId" type="int" notNull="true" primaryKey="true" autoIncrement="true"></field>
		<one   name="patientId" 	type="int"    refTable="Patient" refColumn="patientId"></one>
		<one   name="drugId" 		type="int"    refTable="Drug" refColumn="drugId"></one>
	</class>
</mappings>